[options]
# Windows Production Odoo 17 Configuration
# Optimized for 50 concurrent users on Windows Server
# PostgreSQL 17 integration

# ====================================
# ADMIN & SECURITY SETTINGS
# ====================================
admin_passwd = 1234
proxy_mode = True
list_db = True
db_filter = False

# ====================================
# DATABASE SETTINGS - PostgreSQL 17
# ====================================
db_host = localhost
db_port = 5432
db_user = admin
db_password = 1234
db_maxconn = 64
db_template = template0
db_sslmode = prefer

# ====================================
# MULTI-WORKER CONFIGURATION (50 Users)
# ====================================
# 10 workers optimal for 50 concurrent users
workers = 10
max_cron_threads = 2

# Long polling port for real-time features (chat, notifications)
gevent_port = 8072
http_port = 8069

# ====================================
# MEMORY LIMITS (Production Grade)
# ====================================
# 2GB soft limit per worker (10 workers = 20GB + overhead)
limit_memory_soft = 2147483648
# 3GB hard limit per worker
limit_memory_hard = 3221225472

# ====================================
# REQUEST & TIME LIMITS
# ====================================
# Worker recycling after 8192 requests (prevents memory leaks)
limit_request = 8192
# CPU time limit: 10 minutes
limit_time_cpu = 600
# Real time limit: 20 minutes (includes DB queries)
limit_time_real = 1200

# ====================================
# WINDOWS FILE PATHS
# ====================================
# Windows-style paths (use forward slashes for compatibility)
addons_path = addons,custom_addons
data_dir = ./data
logfile = ./logs/odoo-prod.log

# ====================================
# LOGGING CONFIGURATION
# ====================================
log_level = info
logrotate = True
log_handler = :INFO
log_db = False
log_db_level = warning

# Production logging for performance monitoring
log_sql = False
log_sql_db = False

# ====================================
# SESSION MANAGEMENT
# ====================================
# File-based sessions (optimal for Windows, no Redis dependency)
session_store = filesystem

# ====================================
# PERFORMANCE OPTIMIZATION
# ====================================
# Cache timeout for better performance
cache_timeout = 300000
# Enable caching
enable_cache = True

# Server-wide modules
server_wide_modules = base,web

# ====================================
# PRODUCTION SETTINGS
# ====================================
# Disable development features
dev_mode = False
demo = False
without_demo = True

# ====================================
# SECURITY HARDENING
# ====================================
# proxy_mode already set in admin section above

# ====================================
# EMAIL CONFIGURATION
# ====================================
email_from = odoo@192.168.0.21
smtp_server = localhost
smtp_port = 587
smtp_ssl = False
smtp_user = 
smtp_password = 

# ====================================
# WINDOWS-SPECIFIC OPTIMIZATIONS
# ====================================
# Optimize for Windows Server environment
max_memory_usage = 31457280000
# Windows-friendly timeouts
keepalive_timeout = 75
client_timeout = 300

# ====================================
# REAL-TIME FEATURES
# ====================================
# Enable WebSocket support for live features
websocket_rate_limit_burst = 10
websocket_rate_limit_delay = 0.2

# ====================================
# DATABASE OPTIMIZATION
# ====================================
# Optimize for PostgreSQL 17 on Windows
db_statement_timeout = 300000
db_query_timeout = 120000

# ====================================
# MONITORING & HEALTH
# ====================================
# Enable health checks
health_check = True
health_check_url = /web/health

# ====================================
# BACKUP CONFIGURATION
# ====================================
# Backup directory (Windows path)
backup_directory = ./backup
backup_retention_days = 30

# ====================================
# LOCALIZATION
# ====================================
# Default language and timezone
lang = en_US
timezone = UTC

# ====================================
# ADVANCED PERFORMANCE
# ====================================
# Optimize for medium enterprise deployment
worker_class = sync
preload_app = True

# Database connection optimization
db_pool_size = 16
db_pool_recycle = 3600
db_pool_pre_ping = True

# ====================================
# WINDOWS SERVICE CONFIGURATION
# ====================================
# Service-friendly settings
pidfile = ./logs/odoo-prod.pid
daemon = False

# ====================================
# LOAD BALANCING PREPARATION
# ====================================
# Ready for load balancer if needed in future
server_name = odoo-prod-01